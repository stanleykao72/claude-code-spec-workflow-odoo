# Odoo Command Lifecycle Cleanup Policy
# This file defines automatic cleanup rules for Odoo development commands
# Generated by Claude Code Spec Workflow for Odoo

# Task Commands - Commands generated from tasks.md files
taskCommands:
  completed:
    # High importance tasks (e.g., critical business features)
    high:
      action: archive                    # Action: archive, delete, retain
      retentionDays: 180                # Keep for 6 months
      importance: high
      moveToPath: "archives/{year}/Q{quarter}/tasks/"
    
    # Medium importance tasks (e.g., regular features)
    medium:
      action: archive
      retentionDays: 90                 # Keep for 3 months
      importance: medium
      moveToPath: "archives/{year}/Q{quarter}/tasks/"
    
    # Low importance tasks (e.g., minor improvements)
    low:
      action: delete
      retentionDays: 30                 # Keep for 1 month only
      importance: low
  
  # Active tasks - tasks still being worked on
  active:
    action: retain
    retentionDays: 365                  # Keep active tasks for 1 year
  
  # Expired tasks - tasks marked as expired or obsolete
  expired:
    action: delete
    retentionDays: 7                    # Quick cleanup of expired tasks

# Bug Fix Commands - Commands for bug resolution workflow
bugFixCommands:
  completed:
    action: archive
    retentionDays: 90                   # Keep resolved bugs for 3 months
    moveToPath: "archives/{year}/bugs/"
  
  active:
    action: retain
    retentionDays: 180                  # Keep active bug investigations for 6 months

# Feature Commands - Commands for new feature development
featureCommands:
  completed:
    action: archive
    retentionDays: 180                  # Keep completed features for 6 months
    moveToPath: "archives/{year}/features/"
  
  active:
    action: retain
    retentionDays: 365                  # Keep active features for 1 year

# Spec Commands - Commands for specification management
specCommands:
  completed:
    action: archive
    retentionDays: 365                  # Keep specifications for 1 year
    moveToPath: "archives/{year}/specs/"
  
  active:
    action: retain
    retentionDays: 730                  # Keep active specs for 2 years

# Permanent Commands - Core system commands that should not be deleted
permanentCommands:
  action: retain
  retentionDays: -1                     # Never delete permanent commands

# Global Settings
globalSettings:
  # Maximum number of active commands allowed before forcing cleanup
  maxActiveCommands: 100
  
  # How often to run automatic cleanup (in days)
  cleanupIntervalDays: 7
  
  # Whether to create backups before cleanup operations
  backupBeforeCleanup: true

# Odoo-Specific Settings
odooSettings:
  # Module-specific command retention
  moduleCommands:
    # Commands for core business modules
    coreModules:
      retentionMultiplier: 2.0          # Double the retention period
      modules: ["sale", "purchase", "account", "stock", "crm"]
    
    # Commands for custom development modules
    customModules:
      retentionMultiplier: 1.5          # 1.5x the retention period
      modules: []                       # Will be populated dynamically
  
  # Environment-specific retention
  environmentCommands:
    production:
      retentionMultiplier: 3.0          # Triple retention for production commands
    staging:
      retentionMultiplier: 2.0          # Double retention for staging
    development:
      retentionMultiplier: 1.0          # Normal retention for development

# Archive Organization
archiveSettings:
  # Directory structure for archived commands
  structure:
    byYear: true                        # Organize by year
    byQuarter: true                     # Organize by quarter within year
    byType: true                        # Organize by command type
    byModule: true                      # Organize by Odoo module (if applicable)
  
  # Compression settings for old archives
  compression:
    enabled: false                      # Enable compression for old archives
    ageThresholdDays: 365              # Compress archives older than 1 year
    format: "gzip"                     # Compression format: gzip, bzip2, zip
  
  # Archive cleanup - cleanup old archives themselves
  archiveCleanup:
    enabled: true                       # Enable cleanup of old archives
    retentionYears: 3                  # Keep archives for 3 years
    warnBeforeDelete: true             # Warn before deleting old archives

# Notification Settings
notifications:
  # Email notifications (if configured)
  email:
    enabled: false
    recipients: []
    events: ["cleanup_completed", "errors_occurred"]
  
  # Console notifications
  console:
    enabled: true
    verbosity: "normal"                 # normal, verbose, quiet
    showProgress: true
  
  # Log file notifications
  logging:
    enabled: true
    logFile: ".odoo-dev/cleanup.log"
    maxLogSize: "10MB"
    keepLogs: 10

# Safety Settings
safety:
  # Require confirmation for destructive operations
  confirmBeforeDelete: false           # Set to true for safer operation
  
  # Always create backups for these command types
  alwaysBackup: ["permanent", "spec"]
  
  # Never delete commands with these tags
  protectedTags: ["critical", "production", "backup"]
  
  # Dry run mode - show what would be done without actually doing it
  dryRunDefault: false

# Custom Rules - Add your own cleanup rules here
customRules:
  # Example: Special handling for migration commands
  migrationCommands:
    pattern: "*-migration-*"
    action: archive
    retentionDays: 730                  # Keep migration commands for 2 years
    moveToPath: "archives/migrations/{year}/"
  
  # Example: Development experiments
  experimentCommands:
    pattern: "*-experiment-*"
    action: delete
    retentionDays: 14                   # Quick cleanup of experiments
    tags: ["experiment", "testing"]

# Reporting Settings
reporting:
  # Generate cleanup reports
  enabled: true
  
  # Report format
  format: "markdown"                    # markdown, json, csv
  
  # Report location
  outputPath: ".odoo-dev/reports/"
  
  # What to include in reports
  includeDetails: true
  includeStats: true
  includeWarnings: true